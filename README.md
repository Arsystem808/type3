
# CapIntel ‚Äî Signals MVP (Crypto & Equities)

–ì–æ—Ç–æ–≤—ã–π ¬´—Ö–µ–¥–∂-—Ñ–æ–Ω–¥-–ª–∞–π—Ç¬ª —Å–∫–µ–ª–µ—Ç: FastAPI + Streamlit, —Å–∏–≥–Ω–∞–ª—ã BUY/SHORT/CLOSE/WAIT —Å —É—Ä–æ–≤–Ω—è–º–∏, confidence, —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏.

## üöÄ –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏
- **API (FastAPI)**: `/signal` ‚Äî –≤—ã–¥–∞—ë—Ç —Å–∏–≥–Ω–∞–ª –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ; `/backtest` ‚Äî –∏–≥—Ä—É—à–µ—á–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è.
- **App (Streamlit)**: —Ä–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–¥–µ–∏ (–¥–µ–π—Å—Ç–≤–∏–µ, —É—Ä–æ–≤–Ω–∏, —Å—Ü–µ–Ω–∞—Ä–∏–π), JSON, –±—ã—Å—Ç—Ä—ã–π —Å–∏–º-–±—ç–∫—Ç–µ—Å—Ç.
- **Engine**: –º–æ–∫-–ª–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω–µ–π —Å –∞–≤—Ç–æ-–ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ (—Å—Ç–æ–ø—ã/—Ü–µ–ª–∏), sizing –ø–æ confidence.
- **Narrator**: ¬´–≥–æ–ª–æ—Å —Ç—Ä–µ–π–¥–µ—Ä–∞¬ª –±–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –ª–æ–≥–∏–∫–∏.
- **Tests**: –±–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —É—Ä–æ–≤–Ω–µ–π.

> –í–∞–∂–Ω–æ: –Ω–∏–∫–∞–∫–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –ª–µ–∫—Å–∏–∫–∏ –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º —Ç–µ–∫—Å—Ç–µ; —Ç–æ–ª—å–∫–æ —Ü–µ–Ω–∞ –∏ –¥–µ–π—Å—Ç–≤–∏–µ.

## üß© –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
python -m venv .venv && source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫
API:
```bash
uvicorn api.main:app --reload
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
streamlit run app/app.py
```

## üîå –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
```bash
curl -X POST http://127.0.0.1:8000/signal \
  -H "Content-Type: application/json" \
  -d '{"ticker":"AAPL","asset_class":"equity","horizon":"swing","last_price":230.0}'
```

## üß™ –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
```bash
pytest -q
```

## üõ°Ô∏è Guard-rails
- –ê–≤—Ç–æ-—Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω–µ–π: —Å—Ç–æ–ø –Ω–µ ¬´—Ö—É–∂–µ¬ª –≤—Ö–æ–¥–∞, —Ü–µ–ª–∏ –≤ –Ω—É–∂–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ.
- –°–∞–π–∑–∏–Ω–≥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∫—Ä—ã—à–∞–º–∏ –ø–æ –∫–ª–∞—Å—Å—É –∞–∫—Ç–∏–≤–∞/–≥–æ—Ä–∏–∑–æ–Ω—Ç—É.
- –¢–µ–∫—Å—Ç —Å–∏–≥–Ω–∞–ª–∞ ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π, —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π, –±–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤/—Ñ–∏—á.

## üì¶ –ö—É–¥–∞ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –¥–∞–ª—å—à–µ
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ü–µ–Ω—É (binance/alphavantage/‚Ä¶).
- –î–æ–±–∞–≤–∏—Ç—å meta-labeling, regime-—Ñ–∏–ª—å—Ç—Ä, –∫–∞–ª–∏–±—Ä–æ–≤–∫—É –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π.
- –†–µ–∞–ª—å–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç: –∫–æ–º–∏—Å—Å–∏–∏, —Å–ø—Ä–µ–¥, –∏–º–ø–∞–∫—Ç, –∑–∞–¥–µ—Ä–∂–∫–∏, —á–∞—Å—Ç–∏—á–Ω—ã–π fill.
- –ü–æ—Ä—Ç—Ñ–µ–ª—å: —Ç–∞—Ä–≥–µ—Ç-–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, —Ä–∏—Å–∫-–ª–∏–º–∏—Ç—ã, TCA, –æ—Ç—á—ë—Ç—ã.
```


## üîë Polygon.io –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
–£–∫–∞–∂–∏ –∫–ª—é—á –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ (–ª—é–±–æ–π –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á–∏—Ç–∞–µ—Ç—Å—è):
```
export POLYGON_API_KEY=pk_************************
# (–∏–ª–∏) POLYGON_KEY / API_KEY
```

–í Streamlit –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ **¬´–ü–æ–¥—Ç—è–Ω—É—Ç—å —Ü–µ–Ω—É –∏–∑ Polygon¬ª**, –∞ –≤ API –¥–æ—Å—Ç—É–ø–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç:
```
GET /price?asset_class=equity&ticker=AAPL
GET /price?asset_class=crypto&ticker=BTCUSD
```
–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã Polygon, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:
- **Stocks Last Trade**: `/v2/last/trade/{stocksTicker}`  
- **Crypto Last Trade**: `/v1/last/crypto/{from}/{to}`  
- **Aggregates v2** (fallback): `/v2/aggs/ticker/{ticker}/range/1/minute/{from}/{to}?sort=desc&limit=1`
